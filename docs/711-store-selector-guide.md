# 7-11 門市選擇器使用指南

## 功能概述

我們已經整合了GitHub上的台灣CVS地圖資料，完善了7-11門市選擇器功能。現在用戶可以通過多種方式選擇7-11門市：

### 主要功能

1. **本地搜尋門市** (推薦)
   - 支援按門市名稱、地址、門市代號搜尋
   - 顯示門市詳細資訊和服務項目
   - 支援Google地圖導航
   - 包含7,193個完整門市資料

2. **綠界地圖選擇**
   - 整合綠界物流API
   - 支援C2C取貨服務
   - 自動回調處理

3. **7-11官方查詢**
   - 連結到7-11官方門市查詢系統
   - 提供額外的門市資訊

## 技術實現

### 後端API

- **端點**: `/api/stores`
- **搜尋**: `/api/stores/search?query=關鍵字&type=搜尋類型&limit=結果數量`
- **門市詳情**: `/api/stores/:storeId`
- **門市列表**: `/api/stores?page=頁碼&limit=每頁數量&city=城市&area=區域`

### 資料來源

- 整合了GitHub上的台灣CVS地圖資料
- 包含7,193個7-11門市完整資訊
- 每個門市包含：ID、名稱、電話、地址、座標、城市、區域、服務項目

### 前端組件

- `StoreSelector.tsx` - 主要選擇器組件
- 支援多種搜尋模式
- 響應式設計，支援手機和桌面
- 整合Toast通知系統

## 使用方式

### 1. 本地搜尋門市

1. 點擊「本地搜尋門市」按鈕
2. 選擇搜尋類型：
   - 門市名稱：搜尋門市名稱
   - 地址搜尋：搜尋地址、城市、區域
   - 門市代號：搜尋門市ID
3. 輸入搜尋關鍵字
4. 從搜尋結果中選擇門市
5. 可點擊導航按鈕開啟Google地圖

### 2. 綠界地圖選擇

1. 點擊「綠界地圖選擇」按鈕
2. 系統會跳轉到綠界物流地圖
3. 在地圖上選擇門市
4. 選擇完成後會自動回調到我們的系統

### 3. 7-11官方查詢

1. 點擊「7-11官方查詢」按鈕
2. 在新視窗中開啟7-11官方門市查詢系統
3. 可獲取額外的門市資訊

## 門市資料結構

```json
{
  "id": "門市代號",
  "name": "門市名稱",
  "tel": "電話號碼",
  "address": "完整地址",
  "lat": 緯度,
  "lng": 經度,
  "city": "城市",
  "area": "區域",
  "service": ["服務項目陣列"]
}
```

## 服務項目說明

門市可能提供的服務項目包括：
- `atm`: ATM提款機
- `seat`: 座位區
- `ibon-wifi`: ibon WiFi
- `power-rental`: 行動電源租借
- `ibon`: ibon服務
- `fresh-tea`: 現泡茶飲
- `specialty-coffee`: 精品咖啡
- `city-oatmeal`: 城市燕麥
- `dessert`: 甜點
- `frozen-delivery`: 冷凍配送
- 等等...

## 開發注意事項

### 資料更新

如需更新門市資料：
1. 重新執行 `backend/src/scripts/import-711-stores.js`
2. 重啟後端服務

### 錯誤處理

- 搜尋失敗時會顯示錯誤提示
- 網路問題時會顯示重試建議
- 門市資料載入失敗時會使用備用資料

### 效能優化

- 搜尋結果限制為10個
- 支援分頁載入
- 使用本地快取減少API請求

## 未來改進

1. **地圖整合**
   - 整合Leaflet地圖顯示門市位置
   - 支援地圖上的門市選擇

2. **進階篩選**
   - 按服務項目篩選門市
   - 按營業時間篩選
   - 按距離排序

3. **用戶體驗**
   - 記住用戶常用門市
   - 支援門市收藏功能
   - 門市評價系統

4. **資料同步**
   - 定期更新門市資料
   - 即時同步門市狀態
   - 支援門市營業狀態

## 相關檔案

- `src/components/StoreSelector.tsx` - 前端選擇器組件
- `backend/src/routes/stores.js` - 後端API路由
- `backend/src/scripts/import-711-stores.js` - 資料導入腳本
- `backend/src/data/711-stores.json` - 門市資料檔案